function checkStatus(){FB.getLoginStatus(function(){FB.api("/me",function(e){$.ajax({type:"POST",url:"/clients/check_log",data:{email:e.email,fb_id:e.id},dataType:"html",success:function(e){0==e||window.location.replace(document.referrer)}})})})}function check_status(){$.ajax({type:"POST",url:"/clients/check_log",success:function(e){var a={};a.jel=$("#welcome"),0==e?($(".uczelnia-schowek").bind("click",function(){window.location.href="/clients/rejestracja"}),a.jel.append('<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#logowanie" aria-expanded="false" aria-controls="logowanie">Logowanie</button><div class="collapse" id="logowanie"><form method="post" action="/clients/login" class="form-inline"> <input type="text" name="login" placeholder="Login"/> <input type="password" name="password" placeholder="Hasło"/> <input type="submit" value="Login"/> </form> </div> <a href="/clients/rejestracja" class="btn btn-primary" type="button"> Rejestracja </a>')):(a.jel.append('<div class="witaj">Witaj '+e),a.jel.append('<a href="/clients/edit" class="btn btn-primary" type="button">Zmień dane</a></div>'),schowek())}})}function statusCallback(e){"connected"===e.status?FB.api("/me",function(e){$.ajax({type:"POST",url:"/clients/check_log",data:{email:e.email,fb_id:e.id},dataType:"html",success:function(e){var a={};a.jel=$("#welcome"),0==e?($(".uczelnia-schowek").bind("click",function(){window.location.href="/clients/rejestracja"}),a.jel.append('<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#logowanie" aria-expanded="false" aria-controls="logowanie">Logowanie</button><div class="collapse" id="logowanie"><form method="post" action="/clients/login" class="form-inline"> <input type="text" name="login" placeholder="Login"/> <input type="password" name="password" placeholder="Hasło"/> <input type="submit" value="Login"/> </form> </div> <a href="/clients/rejestracja" class="btn btn-primary" type="button"> Rejestracja </a>')):(a.jel.append('<div class="witaj">Witaj '+e),a.jel.append('<a href="/clients/edit" class="btn btn-primary" type="button">Zmień dane</a></div>'),schowek())}})}):check_status()}function enable_facebook(){window.fbAsyncInit=function(){FB.init({appId:"192030964309734",cookie:!0,xfbml:!0,version:"v2.1"}),FB.getLoginStatus(function(e){statusCallback(e)}),FB.Event.subscribe("auth.logout",function(){window.location="/clients/logout"})},function(e,a,t){var i,n=e.getElementsByTagName(a)[0];e.getElementById(t)||(i=e.createElement(a),i.id=t,i.src="//connect.facebook.net/pl_PL/sdk.js",n.parentNode.insertBefore(i,n))}(document,"script","facebook-jssdk")}$(function(){$("#searchpage").size()>0&&searchpage.init("#searchpage"),$("#znajdz-uczelnie-mini").size()>0&&searchpage.init("#znajdz-uczelnie-mini"),$("#welcome").size()>0&&enable_facebook()}),$("#nav a").each(function(){var e=window.location.pathname,a=$(this).attr("href");a===e&&$(this).closest("li").addClass("active")}),$(window).load(function(){$("#carousel-projects_services").size()>0&&$("#carousel-projects_services").carouFredSel({responsive:!0,items:{width:200,height:150,visible:{min:1,max:4}},width:"200px",height:"150px",auto:!0,circular:!0,infinite:!1,prev:{button:"#car_prev",key:"left"},next:{button:"#car_next",key:"right"},swipe:{onMouse:!0,onTouch:!0},scroll:{easing:"",duration:1200}}),$("#carousel-projects").size()>0&&$("#carousel-projects").carouFredSel({responsive:!0,items:{width:200,height:380,visible:{min:1,max:4}},width:"200px",height:"380px",auto:!0,circular:!0,infinite:!1,prev:{button:"#car_prev",key:"left"},next:{button:"#car_next",key:"right"},swipe:{onMouse:!0,onTouch:!0},scroll:{easing:"",duration:1200}}),$("#carousel-projects_gallery").size()>0&&$("#carousel-projects_gallery").carouFredSel({responsive:!0,items:{width:250,height:210,visible:{min:1,max:4}},width:"250px",height:"200px",auto:!0,circular:!0,infinite:!1,prev:{button:"#car_prev",key:"left"},next:{button:"#car_next",key:"right"},swipe:{onMouse:!0,onTouch:!0},scroll:{easing:"",duration:1200}}),$("#carousel-projects_uni").size()>0&&$("#carousel-projects_uni").carouFredSel({responsive:!0,items:{width:200,height:330,visible:{min:1,max:4}},auto:!0,circular:!0,infinite:!1,prev:{button:"#car_prev",key:"left"},next:{button:"#car_next",key:"right"},swipe:{onMouse:!0,onTouch:!0},scroll:{easing:"",duration:1200}})}),$(document).ready(function(){$("a[data-gal^='prettyPhoto']").prettyPhoto({social_tools:"",animation_speed:"normal",theme:"dark_rounded"})}),$(function(){$("#cbp-qtrotator").cbpQTRotator()}),$(document).ready(function(){$("#filter a").click(function(){$("a.selected").removeClass("selected");var e=$(this);e.addClass("selected");var a=e.attr("data-filter");return $container.isotope({filter:a}),!1})}),$(document).ready(function(){$(".accordion-header").toggleClass("inactive-header");var e=$(".accordion-header").width();return $(".accordion-content").css({width:e}),$(".accordion-header").first().toggleClass("active-header").toggleClass("inactive-header"),$(".accordion-content").first().slideDown().toggleClass("open-content"),$("#lokalizacja").size()>0&&initialize(),$(".accordion-header").click(function(){$(this).is(".inactive-header")?($(".active-header").toggleClass("active-header").toggleClass("inactive-header").next().slideToggle().toggleClass("open-content"),$(this).toggleClass("active-header").toggleClass("inactive-header"),$(this).next().slideToggle().toggleClass("open-content"),$(this).toggleClass("open-content"),$(this).is("#lokalizacja.active-header")&&setTimeout(function(){var e=map.getCenter();google.maps.event.trigger(map,"resize"),map.setCenter(e)},100)):($(this).toggleClass("active-header").toggleClass("inactive-header"),$(this).next().slideToggle().toggleClass("open-content"))}),!1}),$(function(){$(".roll").css("opacity","0"),$(".roll").hover(function(){$(this).stop().animate({opacity:.8},"slow")},function(){$(this).stop().animate({opacity:0},"slow")})});var searchpage={init:function(e){searchpage.tel=$(e);var a={autocomplete:!0,sel:'input[name="kierunek"]',selDataFromId:'input[name="kierunek_id"]',def:"KIERUNEK",cfg:{source:searchpage.getKierunki,minLength:1}};searchpage.cfg=[a];for(var t in searchpage.cfg){var i=searchpage.cfg[t],n=$(i.sel);if(0!==n.size()){if(n.data("cfg",i),n.bind("blur",searchpage.triggerBlur),n.bind("click",searchpage.triggerClick),i.autocomplete){n.autocomplete(i.cfg);var o="selDataFromId"in i?$(i.selDataFromId).val():"";if(""!==o)switch(typeof i.cfg.source){case"function":i.cfg.source({term:"",idVal:o,ti:i},searchpage.setDefaultFromFunction);break;case"object":n.val(i.cfg.source[o-1].label)}n.bind("autocompleteselect",searchpage.triggerSelect)}$(n).is(".kieronly")&&(i.def="SZUKAJ KIERUNKU"),0===n.val().length&&n.val(i.def)}}},setDefaultFromFunction:function(e,a){for(var t in e)if(e[t].value==a.idVal)return void $(a.ti.sel).val(e[t].label)},getJezyki:function(e,a){var t=e.term;$.ajax({type:"POST",url:"/universities/ajax/wczytaj-kierunki-3.html",data:{txt:t},dataType:"json",success:function(t){a(t,e)}})},getKierunki:function(e,a){var t=e.term;$.ajax({type:"POST",url:"/courses/ajax/3",data:{txt:t},dataType:"json",success:function(t){a(t,e)}})},setDataFromHidden:function(){searchpage.tel.find(".znajdz-uczelnie :hidden").each(function(){var e=this.name.match(/\[(.+)\]/)[1];searchpage.setDataParams(e,this.value)})},setDataParams:function(e,a){searchpage.tel.find('.znajdz-uczelnie input[name="'+e+'"]').val(a)},triggerSelect:function(e,a){var t=e.target,i=a.item.value,n=$(t).data("cfg");$(n.selDataFromId).val(a.item.value),$(n.sel).val(a.item.label),e.preventDefault(),"wojewodztwo]"===t.name&&($('input[name="miasto"]').val(""),$('input[name="miasto"]').trigger("blur")),$(t).is(".kieronly")&&(window.location.href="/kierunek/szukaj-"+i+".html")},triggerBlur:function(e){var a=e.target,t=a.value,i=$(a).data("cfg");""===t&&(a.value=i.def),i.autocomplete&&""===t&&$(i.selDataFromId).val("")},triggerClick:function(e){var a=e.target,t=a.value,i=$(a).data("cfg");i.def===t&&(a.value=""),i.autocomplete&&(a.value||$(a).autocomplete("search",a.value))}};hslider=function(){var e={};e.init=function(){e.jel=$(".slide"),e.setWidth()},e.setWidth=function(){e.jel.find(".image").eq(-1).position()},e.init()},schowek=function(){var e={};e.initialized=!1,e.init=function(){e.load(),$(".uczelnia-schowek").bind("click",e.eadd),$(".schowek-call").bind("click",e.wysun)},e.show=function(){e.initialized||($("body").append($("<div/>").attr("id","schowek")),e.jel=$("#schowek"),e.create(),$("#schowek .slidec").scrollable({}),e.initialized=!0)},e.create=function(){e.jel.append('<div class="wysun">wysuń schowek</div>'),e.jel.find(".wysun").click(e.wysun),e.jel.append('<div class="menu"><div class="schowaj">schowaj schowek</div><div class="cl"></div><a class="prev browse left"></a><div class="slidec"><div class="slide items"></div></div><a class="next browse right"></a></div>'),e.jel.find(".schowaj").click(e.schowaj),e.smenu=e.jel.find(".menu"),e.smenu.hide()},e.schowaj=function(){e.smenu.hide()},e.wysun=function(){e.smenu.show()},e.eadd=function(){e.add(event.target.getAttribute("rel"))},e.addItem=function(a){e.smenu.find(".slide").append(a.image!==!1?$('<div class="image"><a href="'+a.link+'"><img src="'+a.image+'" alt="'+a.name+'" /></a><span>usuń</span></div>'):$('<div class="image"><a href="'+a.link+'">'+a.name+"</a><span>usuń</span></div>")),e.smenu.find(".image span").unbind("click",e.usun).bind("click",e.usun)},e.add=function(a){var t={id:a};$.ajax({type:"POST",url:"/storages/ajax/5",dataType:"json",data:t,success:function(a){a&&(e.show(),e.addItem(a[0]),e.wysun())}})},e.load=function(){$.ajax({type:"POST",url:"/storages/ajax/6",dataType:"json",data:{},success:function(a){if(a){e.show();for(var t in a[0].schowek)e.addItem(a[0].schowek[t]);hslider()}}})},e.usun=function(a){var t=a.target.previousSibling.href.match(/\d+$/);console.log(t[0]),t=t[0],$(a.target.parentNode).remove(),$.ajax({type:"POST",url:"/storages/ajax/7",dataType:"json",data:{id:t},success:function(a){if(a){e.show();for(var t in a[0].schowek)e.addItem(a[0].schowek[t]);hslider()}}})},e.init()};var myEl=document.getElementById("fb-login-button");myEl.addEventListener("click",function(){FB.getLoginStatus(function(e){statusCallback(e)})},!1);